FROM ubuntu:22.04

# Install dependencies
RUN apt-get update && \
    apt-get install -y curl sudo bash && \
    curl -fsSL https://ollama.com/install.sh | bash && \
    apt-get clean

# Add ollama to PATH (already placed in /root/.ollama/bin)
ENV PATH="/root/.ollama/bin:${PATH}"

# Default model (can override with env)
ENV LLM_MODEL=tinyllama

# Entrypoint script
COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

ENTRYPOINT ["/entrypoint.sh"]
